
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="/js/easyXDM.min.js" type="text/javascript"></script>
        <script src="/js/jquery-1.8.2.min.js" type="text/javascript"></script>
        <script src="/js/JSCore.js" type="text/javascript"></script>
    </head>
    <body>
        <script type="text/javascript">
            var socket = new easyXDM.Socket({
                   onMessage: function(message, origin){
                    var test = message.split('%%');
                    switch(test[0]){
                        case JSSettings.tmplForCatalog:
                            $.ajax({
                                url: '/tmpl/catalogTmpl.html',
                                success: function (data){
                                    socket.postMessage( data );
                                }
                            });
                            break;
                        case JSSettings.dataForCatalog:
                            $.ajax({
                                url: '/services/data.php?catalog=categories&id=' + test[1],
                                    success: function (data){
                                        socket.postMessage( data );
                                    }
                            });
                            break;
                        case JSSettings.dataForSection:
                            $.ajax({
                                url: '/services/data.php?catalog=sections',
                                    success: function (data){
                                        socket.postMessage( data );
                                    }
                            });
                            break;
                        default:
                            socket.postMessage( { result: error, data: 'unknown command received' } );
                    }
                   }
            });
        </script>
    </body>
</html>
