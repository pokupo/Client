var JSSettings={shopId:0,protocolHTTP:"https://",protocolHTTPS:"https://",host:"server.pokupo.ru/prod/server/",pathToJS:"js/",pathToTmpl:"pokupo.ru/themes/",theme:"default",pathToData:"prod/server/services/DataProxy.php?query=",pathToPostData:"prod/server/services/DataPostProxy.php",pathToCore:"index.html",pathToPostCore:"postData.html",hostApi:"api.pokupo.ru/",catalogPathApi:"catalog/",goodsPathApi:"goods/",userPathApi:"user/",cartPathApi:"cart/",favPathApi:"fav/",geoPathApi:"geo/",shopPathApi:"shop/",orderPathApi:"order/",paymentPathApi:"payment/",messagePathApi:"message/",dev:!1,sourceData:"api",devScripts:["easyXDM.min.js","knockout-3.2.0.js","jquery.cookie.js","jquery.textchange.min.js","widgets/Config-1.1.js","widgets/Routing-1.0.js","widgets/Paging-1.0.js","widgets/Widget-1.1.js","promo/widgets.animate.min.js"],scripts:["easyXDM.min.js","knockout-3.2.0.js","jquery.cookie.js","jquery.textchange.min.js","widgets/Config-1.1.js","widgets/Routing-1.0.js","widgets/Paging-1.0.js","widgets/Widget-1.1.js","promo/pokupo.components.min.js","promo/pokupo.widgets.animate.min.js"],styles:["https://pokupo.ru/assetic/css/compiled/theme.min.css"],inputParameters:{}},EventDispatcher={events:[],AddEventListener:function(t,e){this.events[t]=this.events[t]||[],this.events[t]&&(this.RemoveEventListener(t,e),this.events[t].push(e))},RemoveEventListener:function(t,e){if(this.events[t])for(var o=this.events[t],s=EventDispatcher.HashCode(e.toString()),n=o.length-1;n>=0;--n)if(EventDispatcher.HashCode(o[n].toString())===s)return o.splice(n,1),!0;return!1},DispatchEvent:function(t,e){if(this.events[t])for(var o=this.events[t],s=o.length;s--;)o[s](e)},HashCode:function(t){var e,o,s=0;if(0==t.length)return s;for(e=0;e<t.length;e++)o=t.charCodeAt(e),s=(s<<5)-s+o,s&=s;return s},GetUUID:function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,o="x"==t?e:3&e|8;return o.toString(16)});return t}},JSLoader={loaded:!1,loadedCount:0,pathToJs:null,Init:function(t,e){this.pathToJs=e,JSLoader.Load(t,function(){JSLoader.RegisterLoaded(t)})},RegisterLoaded:function(t){JSLoader.loadedCount=JSLoader.loadedCount+1,JSLoader.loadedCount==t.length&&JSLoader.OnReady()},OnReady:function(){"object"==typeof ko?(JSLoader.loaded=!0,EventDispatcher.DispatchEvent("onload.scripts")):setTimeout(function(){JSLoader.OnReady()},100)},Load:function(t,e){var o=document.getElementsByTagName("head")[0]||document.documentElement;for(var s in t){var n=document.createElement("script");n.async=!0,n.type="text/javascript",n.src=this.pathToJs+t[s],n.async=!0,n.readyState?n.onreadystatechange=function(){("loaded"==n.readyState||"complete"==n.readyState)&&(n.onreadystatechange=null,e())}:n.onload=function(){e&&(n.onload=e())},o.appendChild(n)}},LoadCss:function(t){var e=document.getElementsByTagName("head")[0]||document.documentElement;for(var o in t){var s=document.createElement("link");s.type="text/css",s.rel="stylesheet",s.href=t[o],e.appendChild(s)}}},JSCore={version:1.2,isReady:!1,shopId:null,dev:!1,Init:function(t){"https:"==document.location.protocol&&(JSSettings.protocolHTTP=JSSettings.protocolHTTPS),JSCore.SetInputParameters(t),JSLoader.pathToJs=JSSettings.protocolHTTP+JSSettings.host+JSSettings.pathToJS,JSCore.shopId=JSSettings.shopId,XDMTransport.Init(JSSettings.host+JSSettings.pathToCore),JSCore.isReady=!0},ParserInputParameters:function(t){for(var e={},o=document.getElementsByTagName("script"),s="",n=0;n<=o.length-1&&(!o[n].hasAttribute("src")||(s=o[n].getAttributeNode("src").value,!t.test(s)));n++);if(s){var a=s.split("?");if(a.length>1)for(var r=a[1].split("&"),n=0;n<=r.length-1;n++){var i=r[n].split("=");e[i[0]]=i[1]}}return e?e:null},SetInputParameters:function(t){var e=JSCore.ParserInputParameters(/JSCore/);if(0==Object.keys(e).length&&(e=JSCore.ParserInputParameters(/pokupo.widgets.[a-z0-9]{32}.min.js/)),e)for(var o in e)JSSettings.hasOwnProperty(o)&&(JSSettings[o]=e[o]);if("undefined"!=typeof WParameters&&WParameters.core)for(var o in WParameters.core)JSSettings.hasOwnProperty(o)&&(JSSettings[o]=WParameters.core[o]);if(t)for(var o in t.core)JSSettings.hasOwnProperty(o)&&(JSSettings[o]=t.core[o]);JSSettings.inputParameters=t,JSSettings.inputParameters.shopId=JSSettings.shopId}},XDMTransport={remote:"",event:{},Init:function(t){XDMTransport.remote=t},GetProtocol:function(t){return t?JSSettings.protocolHTTPS:JSSettings.protocolHTTP},EventExecute:function(t,e){$.each(XDMTransport.event[e],function(o){XDMTransport.event[e][o](t)}),delete XDMTransport.event[e]},Load:{FromProxy:function(t){if("undefined"!=typeof easyXDM){var e=new easyXDM.Socket({remote:XDMTransport.GetProtocol(t.protocol)+XDMTransport.remote,onMessage:function(e){t.callback&&t.callback(e)}});e.postMessage(JSSettings.pathToData+t.url)}else setTimeout(function(){XDMTransport.Load.FromProxy(t)},1e3)},FromApi:function(t){$.ajax({type:"GET",async:!0,url:decodeURIComponent(t.url),dataType:t.type,success:function(e){t.callback&&t.callback(e)}})},Tmpl:function(t,e){var o=XDMTransport.GetProtocol()+JSSettings.pathToTmpl+JSSettings.theme+"/tmpl/"+t;/^(https?|ftp)\:\/\/(www\.)?([a-zA-Z0-9\.\-]+\.[a-z]{2,})(\/.+)$/.test(t)&&(o=t),XDMTransport.Load.FromProxy({url:o,callback:e,protocol:null})},Data:function(t,e,o){o=JSSettings.protocolHTTPS;var s=EventDispatcher.HashCode(t+e.toString());void 0==XDMTransport.event[s]&&(XDMTransport.event[s]=[]),XDMTransport.event[s].push(e),1==XDMTransport.event[s].length&&("api"==JSSettings.sourceData&&XDMTransport.Load.FromApi({type:"jsonp",url:decodeURIComponent(t),callback:function(t){XDMTransport.EventExecute(t,s)}}),"proxy"==JSSettings.sourceData&&XDMTransport.Load.FromProxy({url:t,protocol:o,callback:function(t){XDMTransport.EventExecute(JSON.parse(t),s)}}))},DataPost:function(t,e){if("undefined"!=typeof easyXDM){new easyXDM.Rpc({remote:XDMTransport.GetProtocol(e)+JSSettings.host+JSSettings.pathToPostCore,onReady:function(){t.attr("action",XDMTransport.GetProtocol(e)+JSSettings.host+JSSettings.pathToPostData),t.submit()}},{local:{returnUploadResponse:function(e){EventDispatcher.DispatchEvent(EventDispatcher.HashCode(t.toString()),JSON.parse(e.msg))}}})}else setTimeout(function(){XDMTransport.Load.DataPost(t,e)},1e3)}}},Logger={Console:{Exception:function(t,e,o){if(console&&console.log("Exception : "+new Date+" : "+t+" : "+e),o){var s="";o.message&&(s+=o.message),o.stack&&(s+=" | stack: "+o.stack),console&&console.log(s)}},Info:function(t,e){console&&console.log("Info : "+new Date+" : "+t+" : "+e)},VarDump:function(t,e,o){console&&console.log("Var Dump : "+t+" : "+e),console&&console.log(o)}}},PokupoWidgets={model:{order:"widgets/OrderViewModel-1.0.min.js",auth:"widgets/AuthenticationViewModel-1.1.min.js",menu:"widgets/MenuPersonalCabinetWidget-1.1.js",content:"widgets/ContentViewModel-1.0.min.js",goods:"widgets/GoodsViewModel-1.0.js",registration:"widgets/RegistrationViewModel-1.0.min.js"},list:{all:"widgets/pokupo.widgets.min.js",authentication:"widgets/AuthenticationWidget-1.1.js",cart:"widgets/CartWidget-1.0.js",catalog:"widgets/CatalogWidget-1.0.js",breadCrumb:"widgets/BreadCrumbWidget-1.0.js",buttonPayment:"widgets/ButtonPaymentWidget-1.1.js",content:"widgets/ContentWidget-1.1.js",cartGoods:"widgets/CartGoodsWidget-1.0.js",cabinetCartGoods:"widgets/CabinetCartGoodsWidget-1.0.js",favorites:"widgets/FavoritesWidget-1.0.js",goods:"widgets/GoodsWidget-1.2.js",infoSeller:"widgets/InfoSellerWidget-1.0.js",menuPersonalCabinet:"widgets/MenuPersonalCabinetWidget-1.1.js",message:"widgets/MessageWidget-1.0.js",order:"widgets/OrderWidget-1.1.js",orderList:"widgets/OrderListWidget-1.0.js",profile:"widgets/ProfileWidget-1.0.js",registration:"widgets/RegistrationWidget-1.0.js",registrationSeller:"widgets/RegistrationSellerWidget-1.0.js",relatedGoods:"widgets/RelatedGoodsWidget-1.0.js",search:"widgets/SearchWidget-1.0.js",searchResult:"widgets/SearchResultWidget-1.1.js",userInformation:"widgets/UserInformationWidget-1.1.js",standalonePayment:"widgets/StandalonePaymentWidget-1.0.js",statusPayment:"widgets/StatusPaymentWidget-1.0.js",modalMessage:"widgets/ModalMessageWidget-1.0.js",shopInfo:"widgets/ShopInfoWidget-1.0.js"},Init:function(t,e){JSCore.Init(e),"undefined"==typeof jQuery?JSLoader.Load(["jquery-1.11.2.js"],function(){PokupoWidgets.Load(t)}):PokupoWidgets.Load(t)},Load:function(t){var e=JSSettings.scripts;JSSettings.dev&&(e=JSSettings.devScripts),JSLoader.LoadCss(JSSettings.styles);for(var o in e)JSLoader.Load([e[o]],JSLoader.RegisterLoaded(e));if(PokupoWidgets.TestAll(t))JSLoader.Load([PokupoWidgets.list.all]);else for(var o in t){var s=PokupoWidgets.list[t[o]];s&&JSLoader.Load([s])}},TestAll:function(t){for(var e=0;e<=t.length-1;e++)if("all"==t[e])return!0;return!1}};