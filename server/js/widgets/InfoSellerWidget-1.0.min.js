window.InfoSellerWidget=function(){function e(){n(),Loader.IsReady()&&(Loader.InsertContainer(s.container),t())}function o(e){var o=e.options.params;for(var t in o)"tmpl"==t&&o.tmpl?(o.tmpl.path&&(s.tmpl.path=o.tmpl.path),o.tmpl.id&&(s.tmpl.id=o.tmpl.id)):"uniq"==t&&o.uniq?s.hash=o.uniq:"show"==t&&o.show?s.show=o.show:s.infoSeller[t]=o[t];s.container=e.element;var n=a.GetInputParameters("infoSeller");if(!$.isEmptyObject(n)&&(s=a.UpdateSettings1(s,n),n.show))for(var l=0;l<=n.show.length-1;l++)s.show.hasOwnProperty(n.show[l])&&(s.show[n.show[l]]=!0);Config.InfoSeller=s,Parameters.cache.infoSellerCollection[o.uniq]=!0}function t(){a.BaseLoad.Tmpl(s.tmpl,function(){$.each(Parameters.cache.infoSellerCollection,function(e){a.DispatchEvent("ISeller.tmpl."+e),delete Parameters.cache.infoSellerCollection[e]})})}function n(){a.AddEvent("w.ready",function(){t()}),a.AddEvent("ISeller.tmpl."+s.hash,function(){s.infoSeller.data?(i(),p(s.infoSeller.data)):window.console&&console.log("No data on the Seller")})}function l(){$(s.container).empty().html("")}function i(){l(),$(s.container).append($("script#"+a.GetTmplName1(s)).html())}function p(e){var o=new InfoSellerViewModel(e,s.show);r(o)}function r(e){var o=$(s.container);try{ko.cleanNode(o.children()[0]),ko.applyBindings(e,o.children()[0]),s.animate&&s.animate()}catch(t){a.Exception("Ошибка шаблона ["+a.GetTmplName1(s)+"]",t),s.tmpl.custom?(delete s.tmpl.custom,a.BaseLoad.Tmpl(s.tmpl,function(){i(),r(e)})):l()}}var a=this;a.widgetName="InfoSellerWidget",a.version=1,a.minWidgetVersion=1,a.maxWidgetVersion=2,a.minTmplVersion=1,a.maxTmplVersion=2,a.SetParameters=o,a.InitWidget=e;var s={tmpl:{id:"infoSellerTmpl",path:"infoSellerTmpl.html"},animate:"function"==typeof AnimateInfoSeller?AnimateInfoSeller:null,container:null,infoSeller:{},hash:null,show:{blockShop:!0,blockInfoSeller:!1}}};var InfoSellerViewModel=function(e,o){var t=this,n=e.seller,l=e.shop;t.show={blockShop:o.blockShop,blockInfoSeller:o.blockInfoSeller},t.sellerId=n.id,t.nameSeller=n.name_seller,t.websiteSeller=n.website,t.shopId=l.id,t.nameShop=l.name_shop,t.emailLinkTitle=l.email_support,t.mailtoShop="mailto:"+t.emailLinkTitle,t.phonesSupportShop=ko.observable(),l.phones_support&&o.blockShop&&t.phonesSupportShop(l.phones_support),t.siteSupportShop=ko.observable(),l.site_support&&o.blockShop&&t.siteSupportShop(l.site_support),t.siteLinkTitle=ko.computed(function(){var e="";return t.siteSupportShop()&&(e=t.siteSupportShop().replace("http://",""),e=e.replace("https://","")),e},this),t.skypeSupportShop=ko.observable(),l.skype_support&&o.blockShop&&t.skypeSupportShop(l.skype_support),t.icqSupportShop=ko.observable(),l.icq_support&&o.blockShop&&t.icqSupportShop(l.icq_support),t.ratingShop=l.rating_shop,t.positiveOpinion=l.positive_opinion,t.negativeOpinion=l.negative_opinion,t.useCart=l.use_cart,t.routeLogoShop=l.route_logo_shop,t.allGoods=l.all_goods,t.operators=e.operator,t.ClickOperator=function(){}};