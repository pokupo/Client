window.InfoSellerWidget=function(){var j=this;j.widgetName="InfoSellerWidget";j.version=1;j.minWidgetVersion=1;j.maxWidgetVersion=2;j.minTmplVersion=1;j.maxTmplVersion=2;j.SetParameters=f;j.InitWidget=g;var d={tmpl:{id:"infoSellerTmpl",path:"infoSellerTmpl.html"},animate:typeof AnimateInfoSeller=="function"?AnimateInfoSeller:null,container:null,infoSeller:{},hash:null,show:{blockShop:true,blockInfoSeller:false}};function g(){i();if(Loader.IsReady()){Loader.InsertContainer(d.container);h()}}function f(n){var o=n.options.params;for(var m in o){if(m=="tmpl"&&o.tmpl){if(o.tmpl.path){d.tmpl.path=o.tmpl.path}if(o.tmpl.id){d.tmpl.id=o.tmpl.id}}else{if(m=="uniq"&&o.uniq){d.hash=o.uniq}else{if(m=="show"&&o.show){d.show=o.show}else{d.infoSeller[m]=o[m]}}}}d.container=n.element;var k=j.GetInputParameters("infoSeller");if(!$.isEmptyObject(k)){d=j.UpdateSettings1(d,k);if(k.show){for(var l=0;l<=k.show.length-1;l++){if(d.show.hasOwnProperty(k.show[l])){d.show[k.show[l]]=true}}}}Parameters.cache.infoSellerCollection[o.uniq]=true}function h(){j.BaseLoad.Tmpl(d.tmpl,function(){$.each(Parameters.cache.infoSellerCollection,function(k){j.DispatchEvent("ISeller.tmpl."+k);delete Parameters.cache.infoSellerCollection[k]})})}function i(){j.AddEvent("w.ready",function(){h()});j.AddEvent("ISeller.tmpl."+d.hash,function(k){if(d.infoSeller.data){b();c(d.infoSeller.data)}else{window.console&&console.log("No data on the Seller")}})}function a(){$(d.container).empty().html("")}function b(){a();$(d.container).append($("script#"+j.GetTmplName1(d)).html())}function c(k){var l=new InfoSellerViewModel(k,d.show);e(l)}function e(l){var k=$(d.container);try{ko.cleanNode(k.children()[0]);ko.applyBindings(l,k.children()[0]);if(d.animate){d.animate()}}catch(m){j.Exception("Ошибка шаблона ["+j.GetTmplName1(d)+"]",m);if(d.tmpl.custom){delete d.tmpl.custom;j.BaseLoad.Tmpl(d.tmpl,function(){b();e(l)})}else{a()}}}};var InfoSellerViewModel=function(d,b){var c=this,a=d.seller,e=d.shop;c.show={blockShop:b.blockShop,blockInfoSeller:b.blockInfoSeller};c.sellerId=a.id;c.nameSeller=a.name_seller;c.websiteSeller=a.website;c.shopId=e.id;c.nameShop=e.name_shop;c.emailLinkTitle=e.email_support;c.mailtoShop="mailto:"+c.emailLinkTitle;c.phonesSupportShop=ko.observable();if(e.phones_support&&b.blockShop){c.phonesSupportShop(e.phones_support)}c.siteSupportShop=ko.observable();if(e.site_support&&b.blockShop){c.siteSupportShop(e.site_support)}c.siteLinkTitle=ko.computed(function(){var f="";if(c.siteSupportShop()){f=c.siteSupportShop().replace("http://","");f=f.replace("https://","")}return f},this);c.skypeSupportShop=ko.observable();if(e.skype_support&&b.blockShop){c.skypeSupportShop(e.skype_support)}c.icqSupportShop=ko.observable();if(e.icq_support&&b.blockShop){c.icqSupportShop(e.icq_support)}c.ratingShop=e.rating_shop;c.positiveOpinion=e.positive_opinion;c.negativeOpinion=e.negative_opinion;c.useCart=e.use_cart;c.routeLogoShop=e.route_logo_shop;c.allGoods=e.all_goods;c.operators=d.operator;c.ClickOperator=function(g,f){}};