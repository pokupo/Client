var RegistrationFormViewModel=function(e){var i=this;i.username=ko.observable(null);i.errorUsername=ko.observable(null);i.email=ko.observable(null);i.errorEmail=ko.observable(null);i.cssPhone="phone";i.phone=ko.observable(null);i.errorPhone=ko.observable(null);i.cssFirstPassword="firstPassword";i.firstPassword=ko.observable(null);i.errorFirstPassword=ko.observable(null);i.cssSecondPassword="secondPassword";i.secondPassword=ko.observable(null);i.errorSecondPassword=ko.observable(null);i.isChecked=ko.observable(false);i.errorIsChecked=ko.observable(null);i.submitEvent=ko.observable();i.SubmitForm=function(){if(b()){EventDispatcher.DispatchEvent(i.submitEvent(),i)}};function b(){var j=true;if(!g()){j=false}if(!a()){j=false}if(!h()){j=false}if(!f()){j=false}if(!c()){j=false}if(!d()){j=false}return j}function g(){var j=e.error.username;if(!i.username()){i.errorUsername(j.empty);return false}if(i.username().length<3){i.errorUsername(j.minLength);return false}if(i.username().length>40){i.errorUsername(j.maxLength);return false}if(!e.regular.username.test(i.username())){i.errorUsername(j.regular);return false}i.errorUsername(null);return true}function a(){var j=e.error.email;if(!i.email()){i.errorEmail(j.empty);return false}if(i.email().length>64){i.errorUsername(j.maxLength);return false}if(!e.regular.email.test(i.email())){i.errorEmail(j.regular);return false}i.errorEmail(null);return true}function h(){if(i.phone()){if(!e.regular.phone.test($.trim(i.phone()))){i.errorPhone(e.error.phone.regular);return false}}i.errorPhone(null);return true}function f(){var j=e.error.password;i.firstPassword($("input#"+i.cssFirstPassword).val());if(!i.firstPassword()){i.errorFirstPassword(j.empty);return false}if(i.firstPassword().length<6){i.errorFirstPassword(j.minLength);return false}if(i.firstPassword().length>64){i.errorFirstPassword(Config.error.maxLength);return false}i.errorFirstPassword(null);return true}function c(){var j=e.error.password;i.secondPassword($("input#"+i.cssSecondPassword).val());if(!i.secondPassword()){i.errorSecondPassword(j.empty);return false}if(i.firstPassword()!=i.secondPassword()){i.errorSecondPassword(j.equal);return false}i.errorSecondPassword(null);return true}function d(){if(!i.isChecked()){i.errorIsChecked(e.error.isChecked.empty);return false}i.errorIsChecked(null);return true}i.RestoreAccess=function(){};i.agreement="http://"+window.location.hostname+"/rules";i.police="http://"+window.location.hostname+"/police";i.refund="http://"+window.location.hostname+"/refund"};var RegistrationConfirmFormViewModel=function(d,e){var c=this;c.username=d.username();c.cssMailToken="mail_token_block";c.mailToken=ko.observable();c.mailIsConfirm=ko.observable(false);c.errorEmailConfirm=ko.observable(null);c.mailConfirmLater=ko.observable(false);c.cssPhoneToken="phone_token_block";c.phoneToken=ko.observable();c.phoneIsConfirm=ko.observable(false);c.errorPhoneConfirm=ko.observable(null);c.phoneConfirmLater=ko.observable(false);c.errorConfirmLater=ko.observable(null);c.isEmptyPhone=ko.computed(function(){if(!$.isEmptyObject(d)&&d.phone()){return false}c.phoneConfirmLater(true);return true},this);c.submitEvent=ko.observable();c.SubmitForm=function(){if(f()){EventDispatcher.DispatchEvent(c.submitEvent(),c)}};function f(){var h=true;if(!b()){h=false}if(!a()){h=false}if(!g()){h=false}return h}function b(){c.mailToken($.trim(c.mailToken()));if(!c.mailConfirmLater()){if(!c.mailToken()){c.errorEmailConfirm(e.error.emailToken.empty);return false}}c.errorEmailConfirm(null);return true}function a(){if(!c.phoneConfirmLater()){c.phoneToken($.trim(c.phoneToken()));if(!c.phoneToken()){c.errorPhoneConfirm(e.error.phoneToken.empty);return false}}c.errorPhoneConfirm(null);return true}function g(){if(c.phoneConfirmLater()&&c.mailConfirmLater()){c.errorConfirmLater(e.error.confirmLater.empty);c.errorEmailConfirm(null);c.errorPhoneConfirm(null);return false}else{c.errorConfirmLater(null)}return true}c.viewButtonSendToken=ko.observable(false);c.ShowButtonSendToken=function(){c.viewButtonSendToken(false);setTimeout(function(){c.viewButtonSendToken(true)},60000)};c.ClickSendPhoneToken=function(){c.ShowButtonSendToken();EventDispatcher.DispatchEvent("OrderWidget.send.token","sms")};c.ClickSendMailToken=function(){c.ShowButtonSendToken();EventDispatcher.DispatchEvent("OrderWidget.send.token","mail")}};var RegistrationProfileFormViewModel=function(f){var c=this;c.lastName=ko.observable();c.errorLastName=ko.observable(null);c.firstName=ko.observable();c.errorFirstName=ko.observable(null);c.middleName=ko.observable();c.errorMiddleName=ko.observable(null);c.birthDay=ko.observable();c.birthDayHiddenField=ko.observable();c.errorBirthDay=ko.observable(null);c.cssBirthDay="birthDay";c.gender=ko.observable("m");c.errorGender=ko.observable(null);c.cssRegistrationDataForm="personal_information_"+EventDispatcher.HashCode(new Date().getTime().toString());c.submitEvent=ko.observable();c.AddContent=function(i){if(!i.err){c.gender(i.gender);c.lastName(i.f_name);c.firstName(i.s_name);c.middleName(i.m_name);c.birthDay(i.birth_day)}};c.SubmitForm=function(){if(h()){EventDispatcher.DispatchEvent(c.submitEvent(),c)}};function h(){var i=true;if(!d()){i=false}if(!a()){i=false}if(!b()){i=false}if(!g()){i=false}if(!e()){i=false}return i}function d(){var i=f.error.firstName;if(!c.firstName()){c.errorFirstName(i.empty);return false}if(c.firstName().length<2){c.errorFirstName(i.minLength);return false}if(c.firstName().length>20){c.errorFirstName(i.maxLength);return false}if(!f.regular.firstName.test(c.firstName())){c.errorFirstName(i.regular);return false}c.errorFirstName(null);return true}function a(){var i=f.error.lastName;if(!c.lastName()){c.errorLastName(i.empty);return false}if(c.lastName().length<2){c.errorLastName(i.minLength);return false}if(c.lastName().length>20){c.errorLastName(i.maxLength);return false}if(!f.regular.lastName.test(c.lastName())){c.errorLastName(i.regular);return false}c.errorLastName(null);return true}function b(){var i=f.error.middleName;if(c.middleName()){if(c.middleName().length<2){c.errorMiddleName(i.minLength);return false}if(c.middleName().length>20){c.errorMiddleName(i.maxLength);return false}if(!f.regular.middleName.test(c.middleName())){c.errorMiddleName(i.regular);return false}}c.errorMiddleName(null);return true}function g(){var k=f.error.birthDay;if(!c.birthDay()){c.errorBirthDay(k.empty);return false}if(!f.regular.birthDay.test(c.birthDay())){c.errorBirthDay(k.regular);return false}var m=c.birthDay().split(".");var j=new Date(m[2],m[1]-1,m[0]);var i=new Date();var l=new Date(i.getYear()-18,i.getMonth(),i.getDate());if(l<j){c.errorBirthDay(k.minDate);return false}var i=new Date();var n=new Date(i.getYear()-101,i.getMonth(),i.getDate());if(n>j){c.errorBirthDay(k.maxDate);return false}c.errorBirthDay(null);return true}function e(){var i=f.error.gender;if(!c.gender()){c.errorGender(i.empty);return false}if(!f.regular.gender.test(c.gender())){c.errorGender(i.regular);return false}c.errorGender(null);return true}};