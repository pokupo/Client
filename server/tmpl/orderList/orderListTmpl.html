<script type="text/html" id="orderListTmpl">
    <!-- version 1.0 -->
<div class="horizontalSection"> 
    <div class="tabsContent active" id="tabContent_2">
        <div class="horizontalSection noborder">
            <div class="pageWidth">
                <div class="listBox" align="right">
                    <table>
                        <tr>
                            <td><button class="goButton refresh" data-bind="click: ClickRefresh"><span></span>Обновить данные</button></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="horizontalSection noborder">
            <div class="pageWidth">
                <div class="itemsListTableRow orderList">
                    <table cellpadding="0" cellspacing="0" width="100%">
                        <tr>
                            <td class="itemsListTableCell col_1">Номер</td>
                            <td class="itemsListTableCell col_2">Дата</td>
                            <td class="itemsListTableCell col_3">Магазин</td>
                            <td class="itemsListTableCell col_4">Статус заказа</td>
                            <td class="itemsListTableCell col_5">Оплата</td>
                            <td class="itemsListTableCell col_6">Стоимость</td>
                            <td class="itemsListTableCell col_7">Действия</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <!-- ko foreach: list -->
            <!-- ko template: { name: 'orderListItemTmpl' }--><!-- /ko -->
        <!-- /ko -->

        <!-- ko template: { name: 'orderListPagenationTmpl' }--><!-- /ko -->

        <div class="horizontalSection noborder">
            <div class="pageWidth">
                <div class="listBox" align="right">
                    <table>
                        <tr>
                            <td><button class="goButton refresh" data-bind="click: ClickRefresh"><span></span>Обновить данные</button></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="clear"></div>
</script>

<script type="text/html" id="orderListItemTmpl">
    <div class="horizontalSection activeHoverElement">
        <!-- ko if: commentBuyer || commentOperator -->
            <div class="floatPopup">
                <span>
                    <!-- ko if: commentBuyer -->
                    <strong>Примечание покупателя:</strong><!-- ko text: commentBuyer --><!-- /ko -->
                    <br>
                    <!-- /ko -->
                    <!-- ko if: commentOperator -->
                    <strong>Примечание продавца:</strong><!-- ko text: commentOperator --><!-- /ko -->
                    <!-- /ko -->
                </span>
            </div>
        <!-- /ko -->
        <div class="pageWidth">
            <div class="itemsListTableRow orderList">
                <table cellpadding="0" cellspacing="0" width="100%" class="textInfoBlock">
                    <tr>
                        <td class="itemsListTableCell col_1">
                            <!-- ko text: id --><!-- /ko -->
                            <!-- ko if: commentBuyer || commentOperator -->
                                <span class="total">*</span>
                            <!-- /ko -->
                        </td>
                        <td class="itemsListTableCell col_2">
                            <!-- ko text: dateCreate --><!-- /ko -->
                        </td>
                        <td class="itemsListTableCell col_3">
                            <!-- ko text: nameShop --><!-- /ko -->
                        </td>
                        <td class="itemsListTableCell col_4">
                            <span class="statusDetail">
                                <img src="" width="16" height="16" align="absmiddle" data-bind="attr: {src: statusOrderIcon}"><!-- ko text: statusOrderName --><!-- /ko -->
                            </span>
                        </td>
                        <td class="itemsListTableCell col_5">
                            <span class="statusDetail">
                                <img src="" width="16" height="16" align="absmiddle" data-bind="attr: {src: statusPayIcon}"><!-- ko text: statusPayName --><!-- /ko -->
                            </span>
                        </td>
                        <td class="itemsListTableCell col_6">
                            <!-- ko text: finalCost --> <!-- /ko -->
                        </td>
                        
                        <!-- ko if: viewShow-->
                        <td class="itemsListTableCell col_ico">
                            <a href="#" data-bind="click: ClickShow" title="Просмотр">
                                <img src="https://dev.pokupo.ru/images/ico_16.png" alt="Просмотр" title="Просмотр"></img>
                            </a>
                        </td>
                        <!-- /ko -->

                        <!-- ko if: viewEdit-->
                        <td class="itemsListTableCell col_ico">
                            <a href="#" data-bind="click: ClickEdit" title="Редактировать">
                                <img src="https://dev.pokupo.ru/images/ico_25.png" alt="Редактировать" title="Редактировать"></img>
                            </a>
                        </td>
                        <!-- /ko -->

                        <!-- ko if: viewReturn-->
                        <td class="itemsListTableCell col_ico">
                            <a href="#" data-bind="click: ClickReturn" title="Скопировать в корзину">
                                <img src="https://dev.pokupo.ru/images/ico_49.png" alt="Скопировать в корзину" title="Скопировать в корзину"></img>
                            </a>
                        </td>
                        <!-- /ko -->

                        <!-- ko if: viewRepeat-->
                        <td class="itemsListTableCell col_ico">
                            <a href="#" data-bind="click: ClickRepeat" title="Повторить заказ">
                                <img src="https://dev.pokupo.ru/images/ico_54.png" alt="Повторить заказ" title="Повторить заказ"></img>
                            </a>
                        </td>
                        <!-- /ko -->

                        <!-- ko if: viewCanсel-->
                        <td class="itemsListTableCell col_ico">
                            <a href="#" data-bind="click: ClickCancel" title="Отменить">
                                <img src="https://dev.pokupo.ru/images/_cancel_icon.png" alt="Отменить" title="Отменить"></img>
                            </a>
                        </td>
                        <!-- /ko -->
                        
                        <!-- ko if: viewDelete-->
                        <td class="itemsListTableCell col_ico">
                            <a href="#" data-bind="click: ClickDelete" title="Удалить">
                                <img src="https://dev.pokupo.ru/images/ico_15.png" alt="Удалить" title="Удалить"></img>
                            </a>
                        </td>
                        <!-- /ko -->
                        
                        <!-- ko foreach: emptyTd() -->
                            <td class="itemsListTableCell col_ico" data-bind="css: $index"></td>
                        <!-- /ko -->
                    </tr>
                </table>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="orderListPagenationTmpl">
    <!-- ko if: paging().length > 1 -->
    <div class="horizontalSection">
        <div class="pageWidth">
            <div class="pagination">
                <ul >
                    <!-- ko foreach: paging -->
                    <li data-bind="css: cssLink">
                        <!-- ko ifnot: current -->
                        <a href="#" data-bind="text: title, click: ClickLinkPage"></a>
                        <!-- /ko -->
                        <!-- ko text: current ? title : '' --><!-- /ko -->
                    </li>
                    <!-- /ko-->
                </ul>
            </div>
        </div>
    </div>
    <!-- /ko -->
</script>

<script type="text/html" id="orderEmptyListTmpl">
    <!-- version 1.0 -->
    <div class="horizontalSection">
        <div class="pageWidth">
            <br/>
            <p>У Вас нет ни одной покупки.</p>
        </div>
    </div>
</script>

<script type="text/html" id="orderDetailTmpl">
    <!-- version 1.1 -->
<div class="horizontalSection">
    <div class="tabsContent active" id="tabContent_2">
        <div class="horizontalSection noborder">
            <div class="pageWidth">
                <div class="tabsSubnav">
                    <a href="#" data-bind="click: Back">
                        <img src="https://dev.pokupo.ru/images/_back_icon.png" align="absmiddle" height="16" width="16">Вернуться к списку заказов
                    </a>
                </div>

                <h1>Информация о заказе № <!-- ko text: id --><!-- /ko --></h1>
                <div class="listBox">
                    <table cellpadding="0" cellspacing="0" class="listTable">
                        <tr class="listTableHeader">
                            <td>Номер заказа</td>
                            <td>Дата создания</td>
                            <td>Продавец</td>
                            <td>Статус заказа</td>
                        </tr>
                        <tr class="listTableRow">
                            <td data-bind="text: id"></td>
                            <td data-bind="text: dateCreate"></td>
                            <td data-bind="text: nameOwnShop"></td>
                            <td width="200">
                                <!-- ko if: statusOrder() == "init" --> 
                                    <strong class="statusDetail"><img src="https://dev.pokupo.ru/images/_bricks.png" width="16" height="16" align="absmiddle">Формируется</strong>
                                <!-- /ko -->
                                <!-- ko if: statusOrder() == "new" --> 
                                    <strong class="statusDetail"><img src="https://dev.pokupo.ru/images/_check.png" width="16" height="16" align="absmiddle">Новый</strong>
                                <!-- /ko -->
                                <!-- ko if: statusOrder() == "process" --> 
                                    <strong class="statusDetail"><img src="https://dev.pokupo.ru/images/_hourglass.png" width="16" height="16" align="absmiddle">В просессе обработки</strong>
                                <!-- /ko -->
                                <!-- ko if: statusOrder() == "send" -->
                                    <strong class="statusDetail"><img src="https://dev.pokupo.ru/images/_delivery.png" width="16" height="16" align="absmiddle">Отправлен</strong>
                                <!-- /ko -->
                                <!-- ko if: statusOrder() == "delivered" -->
                                    <strong class="statusDetail"><img src="https://dev.pokupo.ru/images/_box_receive.png" width="16" height="16" align="absmiddle">Получен покупателем</strong>
                                <!-- /ko -->
                                <!-- ko if: statusOrder() == "cancel" -->
                                    <strong class="statusDetail"><img src="https://dev.pokupo.ru/images/_cancel_icon.png" width="16" height="16" align="absmiddle">Отменен</strong>
                                <!-- /ko -->
                            </td>
                        </tr>
                    </table>
                    <div class="clear"></div>
                </div>

                <h2>Товары</h2>
                <div class="listBox">
                    <table cellpadding="0" cellspacing="0" class="listTable">
                        <tr class="listTableHeader">
                            <td colspan="2">Наименование</td>
                            <td width="20%">Цена</td>
                            <td>Количество</td>
                            <td>Сумма</td>
                        </tr>
                
                        <!-- ko foreach: goods -->
                        <tr class="listTableRow">
                            <td width="80" style="border-right:none">
                                <a href="" target="_blank" data-bind="click: ClickGoods">
                                    <img src="" width="80" height="80" data-bind="attr: {src: routeImage}">
                                </a>
                            </td>
                            <td style="border-left:none">
                                <p>
                                    <a href="" target="_blank" data-bind="click: ClickGoods">
                                        <strong data-bind="text: fullName"></strong>
                                    </a>
                                </p>
                                <!-- ko if: isEgoodsPaid() -->
                                    <!-- ko foreach: EGoods -->
                                        <a href="#" class="goButton download" target="_blank" data-bind="attr: {href: uploadFile}">
                                            <span></span>
                                            <strong>Загрузить</strong> <!-- ko text: sizeFile --><!-- /ko --> <i>(Осталось <!-- ko text: maxUpload --><!-- /ko --> скачиваний)</i>
                                        </a>
                                        <div class="alreadyDownloadCounter">товрар "<!-- ko text: $parent.fullName --><!-- /ko -->" уже скачан Вами <!-- ko text: countUpload --><!-- /ko --> раз</div>
                                        <!-- ko if: expiration -->
                                            <div class="productAttantion">
                                                <img src="images/_urgent.png" width="16" height="16" align="middle"> Товар доступен для скачивания до <strong data-bind="text: expiration"></strong>.
                                            </div>
                                        <!-- /ko -->
                                    <!-- /ko -->
                                <!-- /ko -->
                            </td>
                            <td data-bind="text: sellCost"></td>
                            <td data-bind="text: count"></td>
                            <td data-bind="text: itogSellCost"></td>
                        </tr>
                        <!-- /ko -->

                        <!-- ko if: discount > 0 -->
                        <tr class="listTableRow">
                            <td colspan="4"><strong>Цена с учетом скидки:</strong> <!-- ko text: discount --><!-- /ko --></td>
                            <td data-bind="text: finalCost"></td>
                        </tr>
                        <!-- /ko -->
                        <tr class="listTableRow">
                            <td colspan="4"><strong>Стоимость доставки:</strong></td>
                            <td data-bind="text: costShipping"></td>
                        </tr>
                        <tr class="listTableRow">
                            <td colspan="4"><strong>Комиссия платежной системы:</strong></td>
                            <td data-bind="text: costPayment"></td>
                        </tr>
                        <tr class="listTableRow">
                            <td colspan="4"><strong>Итого к оплате:</strong></td>
                            <td><strong class="total" data-bind="text: itog"></strong></td>
                        </tr>
                    </table>
                    <div class="clear"></div>
                </div>

                <!-- ko if: commentBuyer() || commentOperator() -->
                <h2>Заметки</h2>
                <div class="listBox">
                     <!-- ko if: commentBuyer() -->
                         <table cellpadding="0" cellspacing="0" class="listTable">
                            <tr class="listTableHeader">
                               <td>Примечание покупателя</td>
                            </tr>
                            <tr class="listTableRow">
                               <td data-bind="text: commentBuyer()"></td>
                            </tr>
                         </table>
                     <!-- /ko -->
                     <!-- ko if: commentOperator() -->
                        <table cellpadding="0" cellspacing="0" class="listTable">
                            <tr class="listTableHeader">
                                <td>Примечание продавца</td>
                            </tr>
                            <tr class="listTableRow">
                                <td data-bind="text: commentOperator()"></td>
                            </tr>
                        </table>
                    <!-- /ko -->
                    <div class="clear"></div>
                </div>
                <!-- /ko -->

                <!-- ko if: realShipping -->
                <h2>Доставка</h2>
                <div class="listBox">
                    <table cellpadding="0" cellspacing="0" class="listTable">
                        <tr class="listTableHeader">
                            <td>Компания</td>
                            <td>Почтовый индекс</td>
                            <td>Страна</td>
                            <td>Регион</td>
                            <td>Город</td>
                            <td>Адрес</td>
                            <td>Получатель</td>
                            <td>Контактный телефон</td>
                        </tr>
                        <tr class="listTableRow">
                            <td><img src="" width="40" height="40" align="absmiddle" data-bind="attr: {src: logoMethodShipping}"> <!-- ko text: nameMethodShipping --><!-- /ko --></td>
                            <td data-bind="text: shippingPostCode"></td>
                            <td data-bind="text: shippingCountry"></td>
                            <td data-bind="text: shippingRegion"></td>
                            <td data-bind="text: shippingCity"></td>
                            <td data-bind="text: shippingAddress"></td>
                            <td data-bind="text: shippingAddressee"></td>
                            <td data-bind="text: shippingContactPhone"></td>
                        </tr>
                    </table>
                    <div class="clear"></div>
                </div>
                <!-- /ko -->

                <h2>Оплата</h2>
                <div class="listBox">
                    <table cellpadding="0" cellspacing="0" class="listTable">
                        <tr class="listTableHeader">
                            <td>Способ оплаты</td>
                            <td>Описание</td>
                            <td>Время обработки</td>
                            <td>Комиссия</td>
                            <td>Номер чека</td>
                            <td>Статус</td>
                        </tr>
                        <tr class="listTableRow">
                            <td><img src="" width="40" height="40" align="absmiddle" data-bind="attr: {src: logoPayment}"/> <!-- ko text: namePayment --><!-- /ko --></td>
                            <td data-bind="text: descPayment"></td>
                            <td data-bind="text: timePayment"></td>
                            <td data-bind="text: costPayment"></td>
                            <td data-bind="text: invoicePayment"></td>
                            <td>
                                <!-- ko if: statusPay() == "wait_check" -->
                                    <strong class="statusDetail"><img src="https://dev.pokupo.ru/images/ico_45.png" width="16" height="16" align="absmiddle">На проверке</strong>
                                <!-- /ko -->
                                <!-- ko if: statusPay() == "wait_pay" --> 
                                    <strong class="statusDetail"><img src="https://dev.pokupo.ru/images/_receipt_invoice.png" width="16" height="16" align="absmiddle">Ожидает оплаты</strong>
                                <!-- /ko -->
                                <!-- ko if: statusPay() == "paid" -->
                                    <strong class="statusDetail"><img src="https://dev.pokupo.ru/images/_coins.png" width="16" height="16" align="absmiddle">Оплачен</strong>
                                <!-- /ko -->
                                <!-- ko if: statusPay() == "cancel" -->
                                    <strong class="statusDetail"><img src="https://dev.pokupo.ru/images/_cancel_icon.png" width="16" height="16" align="absmiddle">Отменен</strong>
                                <!-- /ko -->
                                <!-- ko if: statusPay() == "back" -->
                                    <strong class="statusDetail"><img src="https://dev.pokupo.ru/images/_arrow_return.png" width="16" height="16" align="absmiddle">Возвращен</strong>
                                <!-- /ko -->
                            </td>
                        </tr>
                    </table>

                    <div class="clear"></div>
                </div>

                <!-- ko if: statusOrder() == "init" -->
                <div class="listBox" align="center">
                    <table>
                        <tr>
                            <td><button class="addButton edit" data-bind="click: ClickEdit"><span></span>Изменить заказ</button></td>
                            <td width="50">&nbsp;</td>
                            <td ><button class="addButton cartcopy" data-bind="click: ClickReturn"><span></span>Скопировать в корзину</button></td>
                            <td width="50">&nbsp;</td>
                            <td><button class="subButton cancel" data-bind="click: ClickCancel"><span></span>Отменить заказ</button></td>
                            <td width="50">&nbsp;</td>
                            <td><button class="subButton delete" data-bind="click: ClickDelete"><span></span>Удалить заказ</button></td>
                            <td width="50">&nbsp;</td>
                            <td><button class="goButton approve" data-bind="click: ClickCheck"><span></span>Подтвердить заказ</button></td>
                            
                            <!-- ko if: statusPay() == 'wait_pay' -->
                                <td width="50">&nbsp;</td>
                                <td><button class="goButton refresh" data-bind="click: ClickRefresh"><span></span>Обновить</button></td>
                            <!-- /ko -->
                         </tr>
                    </table>
                    <div class="clear"></div>
                </div>
                <!-- /ko -->

                <!-- ko if: statusOrder() == "new" -->
                <div class="listBox" align="center">
                    <table>
                        <tr>
                            <!-- ko ifnot: statusPay() == "paid" -->
                                <td><button class="subButton cancel" data-bind="click: ClickCancel"><span></span>Отменить заказ</button></td>
                            <!-- /ko -->
                            <!-- ko if: statusPay() == "wait_pay" -->
                                <td width="50">&nbsp;</td>
                                <td data-bind="embedWidget :{ widget : 'ButtonPaymentWidget-1.1', params : { title: 'Оплатить заказ', orderId: id()}}"></td>
                                <td width="50">&nbsp;</td>
                                <td><button class="goButton refresh" data-bind="click: ClickRefresh"><span></span>Обновить</button></td>
                            <!-- /ko -->
                        </tr>
                    </table>
                    <div class="clear"></div>
                </div>
                <!-- /ko -->
                
                <!-- ko if: statusOrder() == "cancel"-->
                <div class="listBox" align="center">
                    <table>
                        <tr>
                            <td><button class="goButton repeat" data-bind="click: ClickRepeat"><span></span>Повторить заказ</button></td>
                            <td width="50">&nbsp;</td>
                            <td><button class="subButton delete" data-bind="click: ClickDelete"><span></span>Удалить заказ</button></td>
                            <!-- ko if: statusPay() == 'wait_pay' -->
                                <td width="50">&nbsp;</td>
                                <td><button class="goButton refresh" data-bind="click: ClickRefresh"><span></span>Обновить</button></td>
                            <!-- /ko -->
                        </tr>
                    </table>
                    <div class="clear"></div>
                </div>
                <!-- /ko -->
                
                <!-- ko if: statusOrder() == "delivered" || statusOrder() == "send" -->
                <div class="listBox" align="center">
                    <table>
                        <tr>
                            <td><button class="goButton repeat" data-bind="click: ClickRepeat"><span></span>Повторить заказ</button></td>
                            <!-- ko if: statusPay() == 'wait_pay' -->
                                <td width="50">&nbsp;</td>
                                <td><button class="goButton refresh" data-bind="click: ClickRefresh"><span></span>Обновить</button></td>
                            <!-- /ko -->
                        </tr>
                    </table>
                    <div class="clear"></div>
                </div>
                <!-- /ko -->
                
                <div class="tabsSubnav">
                    <a href="#" data-bind="click: Back">
                        <img src="https://dev.pokupo.ru/images/_back_icon.png" align="absmiddle" height="16" width="16">Вернуться к списку заказов
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="clear"></div>
</div>
</script>